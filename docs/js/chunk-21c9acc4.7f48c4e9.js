(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21c9acc4"],{"5b37":function(e,r,t){"use strict";t("6bdf")},"6bdf":function(e,r,t){},"93a2":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"register"},[t("a-form-model",e._b({ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},"a-form-model",e.layout,!1),[t("h1",{staticClass:"title"},[e._v(" 注册 "),t("router-link",{attrs:{to:"/login"}},[e._v("已有账号？去登陆")])],1),t("a-form-model-item",{attrs:{"has-feedback":"",label:"用户名",prop:"username"}},[t("a-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.ruleForm.username,callback:function(r){e.$set(e.ruleForm,"username",r)},expression:"ruleForm.username"}})],1),t("a-form-model-item",{attrs:{"has-feedback":"",label:"邮箱",prop:"email"}},[t("a-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.ruleForm.email,callback:function(r){e.$set(e.ruleForm,"email",r)},expression:"ruleForm.email"}})],1),t("a-form-model-item",{attrs:{"has-feedback":"",label:"密码",prop:"pass"}},[t("a-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.pass,callback:function(r){e.$set(e.ruleForm,"pass",r)},expression:"ruleForm.pass"}})],1),t("a-form-model-item",{attrs:{"has-feedback":"",label:"确认密码",prop:"checkPass"}},[t("a-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.checkPass,callback:function(r){e.$set(e.ruleForm,"checkPass",r)},expression:"ruleForm.checkPass"}})],1),t("a-form-model-item",{attrs:{"has-feedback":"",label:"用户类型",prop:"role"}},[t("a-select",{attrs:{"label-in-value":"","default-value":{key:"customer"}},on:{change:e.handleChange}},[t("a-select-option",{attrs:{value:"customer"}},[e._v(" 普通用户 ")]),t("a-select-option",{attrs:{value:"admin"}},[e._v(" 管理员 ")])],1)],1),t("a-form-model-item",{attrs:{"has-feedback":"",label:"验证码",prop:"code"}},[t("a-input",{staticStyle:{width:"150px"},attrs:{type:"text",autocomplete:"off"},model:{value:e.ruleForm.code,callback:function(r){e.$set(e.ruleForm,"code",e._n(r))},expression:"ruleForm.code"}}),t("a-button",{attrs:{type:"primary"},on:{click:e.handleSendCode}},[e._v("获取验证码")])],1),t("a-form-model-item",{attrs:{"wrapper-col":{span:14,offset:4}}},[t("a-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v(" 注册 ")]),t("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v(" 重置 ")])],1)],1)],1)},o=[],s=t("bb36"),l={register:function(e){return s["a"].post("/passport/logon",e)},sendCode:function(e){return s["a"].post("/passport/getCode",e)}},n={data:function(){var e=this,r=function(r,t,a){""===t?a(new Error("请输入密码!")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),a())},t=function(r,t,a){""===t?a(new Error("请再次输入密码!")):t!==e.ruleForm.pass?a(new Error("两次输入密码不一致!")):a()},a=function(r,t,a){if(""===t)a(new Error("请输入邮箱!"));else{var o=/^([a-zA-Z]|[0-9])(\w|-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;o.test(t)?e.$refs.ruleForm.validateField("email"):a(new Error("请输入格式正确的邮箱!")),a()}},o=function(r,t,a){""===t?a(new Error("请输入用户名!")):(e.$refs.ruleForm.validateField("username"),a())},s=function(r,t,a){""===t?a(new Error("请输入验证码!")):(e.$refs.ruleForm.validateField("code"),a())};return{ruleForm:{username:"",email:"",pass:"",checkPass:"",code:"",role:"customer"},rules:{pass:[{validator:r,trigger:"change"}],checkPass:[{validator:t,trigger:"change"}],email:[{validator:a,trigger:"change"}],username:[{validator:o,trigger:"change"}],code:[{validator:s,trigger:"change"}]},layout:{labelCol:{span:4},wrapperCol:{span:14}}}},methods:{submitForm:function(e){var r=this;this.$refs[e].validate((function(e){if(e){var t=r.ruleForm,a=t.email,o=t.pass,s=t.code,n=t.username,i=t.role,u={email:a,password:o,code:s,username:n,role:i};return l.register(u).then((function(e){r.$message.success({content:e}),r.$router.push("/login")}),(function(e){r.$message.error({content:e})})),!0}return console.log("error submit!!"),!1}))},resetForm:function(e){this.$refs[e].resetFields()},handleChange:function(e){this.ruleForm.role=e.key},handleSendCode:function(){var e=this,r=this.ruleForm.email,t=/^([a-zA-Z]|[0-9])(\w|-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;if(t.test(r)){var a={email:r};if(this.timer)return void this.$message.error({content:"验证码发送太频繁，请稍后再试"});this.timer=setTimeout((function(){e.timer=null}),6e4),l.sendCode(a).then((function(){e.$message.success({content:"验证码已发送致您的邮箱，请注意查收"})}))}else this.$message.error({content:"请输入正确的邮箱后再获取验证码"})}}},i=n,u=(t("5b37"),t("2877")),c=Object(u["a"])(i,a,o,!1,null,"b5f4a266",null);r["default"]=c.exports}}]);
//# sourceMappingURL=chunk-21c9acc4.7f48c4e9.js.map