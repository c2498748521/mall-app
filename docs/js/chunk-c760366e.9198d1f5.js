(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c760366e"],{"4f1d":function(t,e,a){"use strict";a("d6aa")},ad25:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"categorys"},[a("Search",{attrs:{categorys:t.categorys},on:{submit:t.handleSubmit}}),a("goods-table",{attrs:{data:t.listData,pagination:t.pagination},on:{edit:t.handleEdit,remove:t.handleRemove}})],1)},o=[],i=(a("4160"),a("d81d"),a("b0c0"),a("159b"),a("5530")),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-form-model",{staticClass:"search",attrs:{layout:"inline",model:t.formInline},on:{submit:t.handleSubmit},nativeOn:{submit:function(t){t.preventDefault()}}},[a("a-form-model-item",[a("a-form-model-item",{attrs:{"has-feedback":"",label:"搜索关键字"}},[a("a-input",{attrs:{placeholder:"请输入关键字"},model:{value:t.formInline.searchWord,callback:function(e){t.$set(t.formInline,"searchWord",e)},expression:"formInline.searchWord"}})],1)],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"商品类目"}},[a("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",allowClear:"",placeholder:"请选择商品类目","option-filter-prop":"children"},on:{change:t.handleChange}},t._l(t.categorys,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.name}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),a("a-form-model-item",[a("a-button",{attrs:{type:"primary","html-type":"submit"}},[t._v(" 搜索 ")])],1),a("a-button",{staticClass:"toGoodsAdd"},[a("router-link",{attrs:{to:{name:"Add"}}},[t._v("添加商品")])],1)],1)},c=[],l={props:["categorys"],data:function(){return{formInline:{searchWord:"",category:""}}},methods:{handleChange:function(t,e){this.formInline.category=e.key},handleSubmit:function(){this.$emit("submit",this.formInline)}}},s=l,d=(a("4f1d"),a("2877")),u=Object(d["a"])(s,r,c,!1,null,null,null),f=u.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-table",{attrs:{columns:t.columns,"data-source":t.tableData,pagination:t.pagination},scopedSlots:t._u([{key:"name",fn:function(e,n){return a("div",{},[a("a-button",{on:{click:function(e){return t.handleEdit(n)}}},[t._v("编辑")]),a("a-button",{on:{click:function(e){return t.handleRemove(n)}}},[t._v("删除")])],1)}}])})},h=[],p=[{title:"ID",dataIndex:"id",key:"id"},{title:"标题",dataIndex:"title",key:"title",ellipsis:!0},{title:"描述",dataIndex:"desc",key:"desc",ellipsis:!0},{title:"类目",dataIndex:"category",key:"category"},{title:"预售价格",dataIndex:"price",key:"price"},{title:"折扣价格",dataIndex:"price_off",key:"price_off"},{title:"标签",dataIndex:"tags",key:"tags"},{title:"限制购买数量",dataIndex:"inventory",key:"inventory"},{title:"上架状态",dataIndex:"status",key:"status",customRender:function(t){return 1===t?"上架":"下架"}},{title:"操作",dataIndex:"name",key:"name",width:200,scopedSlots:{customRender:"name"}}],g={props:["data","pagination"],data:function(){return{columns:p}},computed:{tableData:function(){return this.data.map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{key:t.id})}))}},methods:{handleEdit:function(t){this.$emit("edit",t)},handleRemove:function(t){this.$emit("remove",t)}}},y=g,b=Object(d["a"])(y,m,h,!1,null,null,null),v=b.exports,k=a("f3ff2"),I=a("c40e"),_={components:{Search:f,GoodsTable:v},data:function(){return{categorys:[],listData:[],formInline:{},pagination:{showSizeChanger:!0,total:1}}},created:function(){this.getCategorysData(),this.getListAllData()},methods:{handleSubmit:function(t){this.formInline=t,this.getListAllData()},getCategorysData:function(){var t=this,e={page:1,size:10};k["a"].category(e).then((function(e){t.categorys=e.data}))},getListAllData:function(){var t=this,e=Object(i["a"])({},this.formInline);I["a"].listAll(e).then((function(e){t.pagination.total=e.total,t.listData=e.data,e.data.map((function(e){var a=e;return a.category=t.categorys[a.category-1].name,!0}))}))},handleEdit:function(t){var e=t;this.categorys.forEach((function(a){a.name===t.category&&(e.category=a.id)})),this.$router.push({name:"Edit",params:Object(i["a"])({},e)})},handleRemove:function(t){var e=this,a=this.$createElement;this.$confirm({title:"确认删除",content:function(){return a("div",{style:"color:red;"},["确认删除标题为:".concat(t.title,"的商品吗")])},onOk:function(){I["a"].remove(t.id).then((function(t){t.data.ok&&e.getListAllData()}))},onCancel:function(){return!1},class:"removeList"})}}},x=_,D=Object(d["a"])(x,n,o,!1,null,null,null);e["default"]=D.exports},c40e:function(t,e,a){"use strict";var n=a("bb36");e["a"]={listAll:function(t){return n["a"].get("/products/all",{params:t})},remove:function(t){return n["a"].delete("/products/".concat(t))},add:function(t){return n["a"].post("/products/add",t)},edit:function(t){return n["a"].put("/products/edit",t)}}},d6aa:function(t,e,a){},f3ff2:function(t,e,a){"use strict";var n=a("bb36");e["a"]={category:function(t){return n["a"].get("/category/all",t)}}}}]);
//# sourceMappingURL=chunk-c760366e.9198d1f5.js.map